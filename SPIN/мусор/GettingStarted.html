<body bgcolor=#ffffff>
<html>
<title>SPIN Verifier's Roadmap: iSpin</title>
<h1><tt>SPIN VERIFIER's ROADMAP:
<font color="#FF0000">USING <i>iSPIN</i></font></tt></h1>

The easiest way to get started with <i>Spin</i> is to
use the graphical interface <i>iSpin</i>.
The graphical interface runs independently
from <i>Spin</i> itself, and helps by generating the proper
<i>Spin</i> commands based on menu selections.
<i>iSpin</i> runs <i>Spin</i> in the background to obtain the desired
output, and wherever possible it will attempt to generate
a graphical representation of such output.
<i>iSpin</i> knows when and how to compile code for the
model checkers that <i>Spin</i> can generate, and it knows
when and how to execute it, so there is less to remember.
For more information on running <i>Spin</i> directly,
see the companion document <a href="Roadmap.html">Roadmap.html</a>.
<br>
This description assumes that the appropriate software
has been installed on your system and that all
relevant commands (such as wish, <i>Spin</i>, <i>iSpin</i>, and a
C compiler such as gcc) are within your search path.
If this is not the case, check the <a href="README.html">README</a>
file first.

<h2><tt>One</tt></h2>
To start a first session with <i>iSpin</i>,
use one of the example <i>Promela</i> specifications
from the <i>Test</i> directory of the <i>Spin</i> distribution.
For instance:

<ul>
<pre>$ ispin leader.pml
</pre>
</ul>
The dollar above is the prompt of the command-shell.
The next two words are typed by the user.
If all is well, after ispin starts up it will print something
like the following in its command-log at the bottom of the
main window:
<ul>
<pre>
SPIN LOG:
 Spin Version 6.0.0 -- 3 December 2010
iSpin Version 1.0.0 -- 3 December 2010
TclTk Version 8.5/8.5
1 leader.pml:1
</pre>
</ul>
All further commands executed in the background, prompted by
user selections in the other windows, will appear here as well.

<h2><tt>Two</tt></h2>

You should now have the main <i>Spin</i> control window on the
display, with a <i>Promela</i> specification of the leader election
protocol loaded.
First, press the <i>Help..</i> button in the top menu bar
to view the available help topics.  Select one of the topics, and
simply close the window when done.
<p>
The main text window on the left offers some basic
edit and search capabilities.  You can scroll through the
specification either with button-2 down (on a 3-button mouse),
or with the scroll-bar.
<p>
You can select text fragments by sweeping the mouse with
button-1 (the left-most button) down. Control-C (copy),
Control-V (past), and Control-Z (undo) are  supported.
If you are more comfortable working with another text-editor,
a reasonable way of working with <i>iSpin</i> is also to have the text
of a specification open in your favorite editor; to update
the file being edited explicitly after changes; and then to
select <i>ReOpen</i> from the top menu bar to read in the new version.

<h2><tt>Three</tt></h2>

Still within this first view, you can perform a basic Syntax check,
and a basic check for Redundancies, by selecting the corresponding
buttons near the top of the screen. You can also get the symbol
table of the Promela spec printed out in the same way.
The Automata View panel on the right hand side of the screen relies
on the availability of the dot tool from the graphviz distribution.
If you have it installed, clicking on the automata view button can
display each proctype as a graph.
<p>
Next, move to the Simulate/Replay tab, where you can select
simulation parameters for a simulation run.
For now, just accept the default settings that are
shown, and press the <i>Run</i> button, to perform a
first simulation run.

<h2><tt>Four</tt></h2>

A <i>Message Sequence Chart</i> will be created in the right panel
(assuming your model includes message passing operations of course).
The lower panels, labeled <i>Data Values</i> and <i>Queues</i> 
maintain the current values of all variables and channels used
during the simulation run.
For very large models, you may want to turn off data value tracking,
if it starts slowing down a simulation run.
<br>
The simulation output appears in the middle panel at the bottom.
Once a run is completed, or stopped, you can use the Rewind button
to go back to the start of the run, and step forwards or backwards
through it -- with all values and queue states updated appropriately.
You can also click in the message sequence chart or the output panel
to move to a specific point in the run.

<h2><tt>Five</tt></h2>

Note that a log window at the upper right shows precisely which
commands are generated by iSpin to let the main Spin tool perform
the desired simulation. For instance:
<ul>
<pre>
spin -X -p -v -g -l -s -r -n1 -j0 leader.pml
</pre>
</ul>

The advantage of using <i>iSpin</i> is that you
do not have to remember the meaning of all the options that
<i>Spin</i> recognizes.  (Not all the the options used above are
critical though, so there's also not need for great concern
about using <i>Spin</i> without this interface.  You can find out
what all the option flags to <i>Spin</i> mean by typing in a regular
shell window: "<i>spin --</i>".)

<h2><tt>Six</tt></h2>
By clicking in the boxes in the <i>Message
Sequence Chart</i> displayed on the right the text
window on the left should move to the corresponding points in the code.
<br>
Simularly, clicking on any filename:linenumber reference should bring
up the corresponding file, positioned at the linenumber given.

<h2><tt>Seven</tt></h2>

Next, move to the <i>Verification</i> tab.
There are again lots of choices that can be made about the type of verification
that can be done. The most common choices are on the left side in light blue.
The less frequently used, more advanced options are to the right in grey.
Accept the default settings of the parameters and press the <i>Run</i> button.
<p>
The commands that <i>iSpin</i> generates are printed in the log, which is now
in the right-hand side panel.
<i>Spin</i> first generates a verifier, then compiles and executes it, and
shows the results.  If all is well, the results show
that there are no errors detected in the specification.
The version of the leader election protocol that is being verified
contains several correctness requirements specified as inline LTL formula.
<p>
By default, only a safety verification is performed. To check one of the
LTL properties select Liveness acceptance cycles and provide the name of
the ltl claim to be verified in the box just above the Run button,
for instance property p0 or p1.

<h2><tt>Eight</tt></h2>

Introduce an artificial error in the specification by adding an

<ul>
<pre>
assert(false);
</pre>
</ul>

statement (don't forget the semi-colon)
immediately following either one of the occurrences of:

<ul>
<pre>
:: Active ->
</pre>
</ul>

becomes:

<ul>
<pre>
:: Active -> assert(false);
</pre>
</ul>

Save the file (you have to move to the <i>Edit/View</i> panel to do that),
and repeat the verification run.
<p>
This time, the verification should come back with an error
sequence, and notice at the bottom of the output window recommends
to replay the error trail from the Simulate/Replay panel.
Bring up that tab and make sure a <i>Guided</i> simulation is selected.
(A guided simulation can only be done for an error sequence
that was produced earlier by the verifier.)
Perform the guided simulation, which will now replay the error sequence
found, ending in the assertion violation.

<h2><tt>Nine</tt></h2>

Bring up the <i>Swarm Run</i> panel. If you have swarm installed
(if not, see http://spinroot.com/swarm) you can now easily setup
a swarm run, using as many CPU cores as you have available.
(This option will become more attractive as standard PCs start
getting more and more CPU cores.) Don't select more cores than you
actually have on your system and don't select more memory than you
actually have. The options in the top right-panel show how Spin
will compile the verifier to create lots of different types of
verification runs. This method is especially useful for very
large verification models that cannot be exhaustively verified,
but where we still want to gain maximum confidence that we can
find the errors.

<h2><tt>Ten</tt></h2>
The final two tabs are to save or restore an entire verification
session, including all options selects and intermediate results
created. Useful to remember what precisely you did and how you
found counter-examples. It provides a small approximation of a
version management system for Spin verification runs.

<p><p><p><hr>
<table cols=3 width=100%>
<tr>
<td valign=top>
<a href="http://spinroot.com/spin/">Spin HomePage</a>
</td>
<td valign=top align=center></td>
<td valign=top align=right>
<font size="3"><b><tt>(Page Updated: 3 December 2010)</tt></font></b></td></tr>
</table>
</html>
